# 要件定義書

## はじめに

気軽にメモや感情を記録できるタイムラインアプリを開発します。XやTogglよりもカジュアルに、思考や感情を時系列で記録できるプラットフォームを目指します。フェーズ1では個人用のオフラインアプリとして開発し、フェーズ2で共有機能やクラウド連携を追加する段階的なアプローチを取ります。

## 要件

### 要件1：基本的なメモ投稿機能

**ユーザーストーリー:** 個人ユーザーとして、思考や感情を気軽にメモできるよう、制限なくコメントを入力したい

#### 受け入れ基準

1. WHEN ユーザーがコメント入力欄にテキストを入力 THEN システムは文字数制限なしでテキストを受け付ける
2. WHEN ユーザーがMarkdown記法を使用 THEN システムはMarkdownを適切にレンダリングして表示する
3. WHEN ユーザーが投稿ボタンをクリック THEN システムはコメントを保存してタイムラインに追加する
4. IF コメントが空の場合 THEN システムは投稿を拒否してエラーメッセージを表示する

### 要件2：タイムライン表示機能

**ユーザーストーリー:** 個人ユーザーとして、過去の思考や感情の流れを振り返れるよう、投稿を時系列で確認したい

#### 受け入れ基準

1. WHEN ユーザーがアプリを開く THEN システムは投稿を新しい順（降順）でタイムライン表示する
2. WHEN 新しい投稿が追加される THEN システムはタイムラインの最上部に新しい投稿を表示する
3. WHEN ユーザーが投稿を確認する THEN システムは左側に時間軸、右側に投稿内容を表示する
4. WHEN 投稿数が多い場合 THEN システムは適切にスクロール表示を提供する
5. WHEN ユーザーが時間軸を確認する THEN システムは投稿時刻を分かりやすく左側の時間軸に表示する

### 要件3：オフライン対応とデータ永続化（フェーズ1）

**ユーザーストーリー:** 個人ユーザーとして、ネットワーク接続がない環境でも使用できるよう、ローカルでデータを保存したい

#### 受け入れ基準

1. WHEN ユーザーがオフライン環境でアプリを使用 THEN システムは正常に動作する
2. WHEN ユーザーが投稿を作成 THEN システムはIndexedDBにデータを保存する
3. WHEN ブラウザを再起動 THEN システムは保存されたデータを復元してタイムラインに表示する
4. WHEN 異なる端末でアクセス THEN システムは端末ごとに独立したデータを管理する

### 要件4：統合レイアウト設計

**ユーザーストーリー:** 個人ユーザーとして、時間軸とコメント詳細を同時に確認できるよう、左右分割レイアウトで効率的に情報を把握したい

#### 受け入れ基準

1. WHEN ユーザーがアプリを開く THEN システムは画面を左右に分割して表示する
2. WHEN 左側エリアが表示される THEN システムは縦の時間軸とマーカーを表示する
3. WHEN 右側エリアが表示される THEN システムは投稿のリスト表示を提供する
4. WHEN ユーザーが左側の時間軸マーカーをクリック THEN システムは右側のリストで該当投稿をハイライト表示する
5. WHEN ユーザーが右側のリストをスクロール THEN システムは左側の時間軸で対応するマーカーをハイライト表示する

### 要件5：時間軸エリアの詳細設計

**ユーザーストーリー:** 個人ユーザーとして、時間の流れを視覚的に把握できるよう、左側の時間軸エリアで投稿のタイミングを確認したい

#### 受け入れ基準

1. WHEN 左側エリアが表示される THEN システムは縦の時間軸ラインを表示する
2. WHEN 投稿がある THEN システムは時間軸上に投稿時刻のマーカー（ドット）を表示する
3. WHEN ユーザーが時間軸のマーカーにマウスをホバー THEN システムはコメント内容のプレビューをツールチップで表示する
4. WHEN 同じ時間帯に複数の投稿がある THEN システムは時間軸上に複数のマーカーを近接して配置する
5. WHEN ユーザーがマーカーをクリック THEN システムは右側のリストで該当投稿をハイライト表示する
6. WHEN 右側のリストがスクロールされる THEN システムは対応する時間軸マーカーをハイライト表示する

### 要件6：レスポンシブデザイン

**ユーザーストーリー:** 個人ユーザーとして、様々なデバイスで快適に使用できるよう、画面サイズに応じた表示を求める

#### 受け入れ基準

1. WHEN ユーザーがモバイルデバイスでアクセス THEN システムはモバイル向けに最適化されたUIを表示する
2. WHEN ユーザーがデスクトップでアクセス THEN システムはデスクトップ向けに最適化されたUIを表示する
3. WHEN 画面サイズが変更される THEN システムは適切にレイアウトを調整する

### 要件7：投稿の編集・削除機能

**ユーザーストーリー:** 個人ユーザーとして、間違いや変更したい内容があるとき、過去の投稿を編集・削除したい

#### 受け入れ基準

1. WHEN ユーザーが投稿の編集ボタンをクリック THEN システムは編集モードを表示する
2. WHEN ユーザーが編集内容を保存 THEN システムは変更をIndexedDBに反映してタイムラインを更新する
3. WHEN ユーザーが投稿の削除ボタンをクリック THEN システムは確認ダイアログを表示する
4. WHEN ユーザーが削除を確認 THEN システムは投稿をIndexedDBから削除してタイムラインから除去する

### 要件8：将来拡張への対応（フェーズ2準備）

**ユーザーストーリー:** 開発者として、将来的にクラウド連携や共有機能を追加できるよう、拡張可能な設計にしたい

#### 受け入れ基準

1. WHEN データ層を設計 THEN システムはローカルストレージとクラウドストレージを切り替え可能な抽象化を提供する
2. WHEN コンポーネントを設計 THEN システムは認証機能やリアルタイム更新機能を後から追加できる構造にする
3. WHEN APIを設計 THEN システムは将来のSupabase連携を考慮したデータモデルを使用する
4. WHEN デプロイメントを設計 THEN システムはGitHub PagesやVercelでの静的ホスティングに対応する